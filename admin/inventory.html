<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />        <title>Chandria's La Robe - Inventory</title>

        <!-- BOX-ICON CDN -->
        <link
            href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
            rel="stylesheet"
        />
        <link
            href="https://cdn-uicons.flaticon.com/2.6.0/uicons-regular-rounded/css/uicons-regular-rounded.css"
            rel="stylesheet"
        />

        <!-- NOTYF CDN -->
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/notyf@3/notyf.min.css"
        />
        
        <!-- CROPPER.JS CDN -->
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.css"
        />        <!-- EXTERNAL CSS -->
        <link rel="stylesheet" href="./assets/css/admin-layout.css" />
        <link rel="stylesheet" href="./assets/css/admin-layout-mob.css" />
        <link rel="stylesheet" href="./assets/css/inventory-modern.css" />
        <link rel="stylesheet" href="./assets/css/image-crop-modal.css" />
    </head>
    <body>
        <!-- ====== INVENTORY LOADER ====== -->
        <div id="inventory-loader" class="inventory-loader hidden">
            <div class="inventory-loader-content">
                <div class="inventory-spinner"></div>
                <div class="inventory-loader-text">
                    Loading data from the inventory.
                </div>
            </div>
        </div>

        <!-- SPINNER -->
        <div class="container-spinner d-none" id="spinner">
            <div class="spinner"></div>
            <div class="spinner-text" id="spinner-text">Uploading</div>
        </div>
          <!-- // -->
        <nav class="sidebar close">
            <header>
                <div class="image-text">
                    <span class="image">
                        <img
                            src="./assets/images/chandriaslogo.png"
                            alt="logo"
                        />
                    </span>
                </div>

                <i class="bx bx-chevron-right toggle"></i>
            </header>

            <div class="menu-bar">
                <div class="menu">
                    <ul class="menu-links">                        <li class="nav-link">
                            <a href="./dashboard.html">
                                <i class="bx bxs-dashboard icon"></i>
                                <span class="text nav-text">Dashboard</span>
                            </a>
                        </li>

                        <li class="nav-link">
                            <a href="./analytics.html">
                                <i class="bx bxs-bar-chart-alt-2 icon"></i>
                                <span class="text nav-text">Analytics</span>
                            </a>
                        </li>

                        <li class="nav-link active">
                            <a href="./inventory.html">
                                <i class="bx bxs-t-shirt icon"></i>
                                <span class="text nav-text">Inventory</span>
                            </a>
                        </li>

                        <li class="nav-link">
                            <a href="./calendar.html">
                                <i class="bx bxs-calendar icon"></i>
                                <span class="text nav-text">Calendar</span>
                            </a>
                        </li>

                        <li class="nav-link">
                            <a href="./rental.html">
                                <i class="bx bxs-package icon"></i>
                                <span class="text nav-text">Rental</span>
                            </a>
                        </li>                        <li class="nav-link">
                            <a href="./customer-logs.html">
                                <i class="bx bxs-user icon"></i>
                                <span class="text nav-text">Logs History</span>
                            </a>
                        </li>

                        <li class="nav-link">
                            <a href="./settings.html">
                                <i class="bx bxs-cog icon"></i>
                                <span class="text nav-text">Settings</span>
                            </a>
                        </li>
                    </ul>
                </div>

                <div class="bottom-content"></div>
            </div>
        </nav>        <main class="main-content modern-inventory">
            <!-- Page Header -->
            <div class="page-header">
                <div class="header-left">
                    <h1 class="page-title">Inventory</h1>
                    <p class="page-subtitle">Manage your products and additional items</p>
                </div>
                <div class="header-right">
                    <!-- Additional header actions can go here if needed -->
                </div>
            </div>

            <!-- Filters and Actions Section -->
            <div class="inventory-controls">
                <div class="filter-section">
                    <div class="type-filters">
                        <button class="filter-btn active" data-filter="all">All Types</button>
                        <button class="filter-btn" data-filter="product">Product</button>
                        <button class="filter-btn" data-filter="additional">Additional</button>
                    </div>
                </div>
                
                <div class="action-section">
                    <div class="search-container">
                        <i class="bx bx-search search-icon"></i>
                        <input type="text" id="inventory-search" placeholder="Search products..." class="search-input">
                    </div>
                    <button class="action-btn primary" id="add-product-btn">
                        <i class="bx bx-plus"></i>
                        Add Product
                    </button>
                    <button class="action-btn secondary" id="add-additional-btn">
                        <i class="bx bx-plus"></i>
                        Add Additional
                    </button>
                </div>
            </div>

            <!-- Table Container -->
            <div class="table-container">
                <div class="table-wrapper">
                    <table class="inventory-table" id="inventory-table">
                        <thead>
                            <tr id="table-header">
                                <th>Image</th>
                                <th>Name</th>
                                <th>Price</th>
                                <th>Category</th>
                                <th>Sizes</th>
                                <th>Quantity</th>
                                <th>Code</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="inventory-tbody">
                            <!-- Data will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
                
                <!-- Pagination -->
                <div class="pagination-container">
                    <div class="pagination-info">
                        <span id="pagination-info-text">Showing 1-10 of 0 items</span>
                    </div>
                    <div class="pagination-controls">
                        <button class="pagination-btn" id="prev-page" disabled>
                            <i class="bx bx-chevron-left"></i>
                        </button>
                        <div class="page-numbers" id="page-numbers">
                            <!-- Page numbers will be generated -->
                        </div>
                        <button class="pagination-btn" id="next-page" disabled>
                            <i class="bx bx-chevron-right"></i>
                        </button>
                    </div>
                </div>
            </div>
        </main>

        <!-- ADD PRODUCT MODAL -->
        <div id="addProductModal" class="modern-modal">
            <div class="modal-backdrop"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title">Add Product</h2>
                    <button class="modal-close" id="close-add-product">&times;</button>
                </div>
                <form id="addProductForm" class="modal-form">
                    <!-- Image Upload Section -->
                    <div class="form-group">
                        <label class="form-label">Product Images</label>
                        <div class="image-upload-container">
                            <div class="upload-box" id="front-upload">
                                <input type="file" id="add-front-image" accept="image/*" hidden>
                                <div class="upload-content">
                                    <i class="bx bx-cloud-upload upload-icon"></i>
                                    <p>Front View</p>
                                    <span>Click to upload</span>
                                </div>
                                <div class="image-preview" id="front-preview" style="display: none;">
                                    <img src="" alt="Front view">
                                    <button type="button" class="remove-image">&times;</button>
                                </div>
                            </div>
                            <div class="upload-box" id="back-upload">
                                <input type="file" id="add-back-image" accept="image/*" hidden>
                                <div class="upload-content">
                                    <i class="bx bx-cloud-upload upload-icon"></i>
                                    <p>Back View</p>
                                    <span>Click to upload</span>
                                </div>
                                <div class="image-preview" id="back-preview" style="display: none;">
                                    <img src="" alt="Back view">
                                    <button type="button" class="remove-image">&times;</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Product Details -->
                    <div class="form-group">
                        <label class="form-label">Product Name</label>
                        <input type="text" id="add-product-name" class="form-input" placeholder="Enter product name" required>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Category</label>
                            <select id="add-product-category" class="form-select" required>
                                <option value="">Select Category</option>
                                <option value="Ball Gown">Ball Gown</option>
                                <option value="Wedding Gown">Wedding Gown</option>
                                <option value="Fairy Gown">Fairy Gown</option>
                                <option value="Long Gown">Long Gown</option>
                                <option value="Suits">Suits</option>
                                <option value="custom">Add Custom</option>
                            </select>
                            <div class="custom-category" id="custom-category-section" style="display: none;">
                                <input type="text" id="custom-category-input" class="form-input" placeholder="Enter custom category">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Price (₱)</label>
                            <input type="number" id="add-product-price" class="form-input" placeholder="0.00" min="0" step="0.01" required>
                        </div>
                    </div>

                    <!-- Product Sizes & Quantities -->
                    <div class="form-group">
                        <label class="form-label">Product Sizes & Quantities</label>
                        <div class="size-selection">
                            <div class="size-checkboxes">
                                <label class="size-checkbox">
                                    <input type="checkbox" name="product-size" value="XS">
                                    <span>XS</span>
                                </label>
                                <label class="size-checkbox">
                                    <input type="checkbox" name="product-size" value="S">
                                    <span>S</span>
                                </label>
                                <label class="size-checkbox">
                                    <input type="checkbox" name="product-size" value="M">
                                    <span>M</span>
                                </label>
                                <label class="size-checkbox">
                                    <input type="checkbox" name="product-size" value="L">
                                    <span>L</span>
                                </label>
                                <label class="size-checkbox">
                                    <input type="checkbox" name="product-size" value="XL">
                                    <span>XL</span>
                                </label>
                                <label class="size-checkbox">
                                    <input type="checkbox" name="product-size" value="XXL">
                                    <span>XXL</span>
                                </label>
                            </div>
                            <div class="size-quantities" id="size-quantities">
                                <!-- Quantity inputs will be added dynamically -->
                            </div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Color</label>
                            <div class="color-input-container">
                                <input type="text" id="add-product-color" class="form-input" placeholder="Enter or select color">
                                <input type="color" id="color-picker" class="color-picker">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Sleeve Style</label>
                            <select id="add-product-sleeve" class="form-select">
                                <option value="">Select Sleeve Style</option>
                                <option value="Long Sleeve">Long Sleeve</option>
                                <option value="Short Sleeve">Short Sleeve</option>
                                <option value="Off Shoulder">Off Shoulder</option>
                                <option value="custom">Add Custom</option>
                            </select>
                            <div class="custom-sleeve" id="custom-sleeve-section" style="display: none;">
                                <input type="text" id="custom-sleeve-input" class="form-input" placeholder="Enter custom sleeve style">
                            </div>
                        </div>
                    </div>

                    <!-- Product Code (Auto-generated) -->
                    <div class="form-group">
                        <label class="form-label">Product Code</label>
                        <input type="text" id="add-product-code" class="form-input" placeholder="Auto-generated" readonly>
                    </div>

                    <!-- Modal Actions -->
                    <div class="modal-actions">
                        <button type="button" class="btn-secondary" id="cancel-add-product">Cancel</button>
                        <button type="submit" class="btn-primary" id="confirm-add-product">Add Product</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- ADD ADDITIONAL MODAL -->
        <div id="addAdditionalModal" class="modern-modal">
            <div class="modal-backdrop"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title">Add Additional</h2>
                    <button class="modal-close" id="close-add-additional">&times;</button>
                </div>
                <form id="addAdditionalForm" class="modal-form">
                    <!-- Image Upload Section -->
                    <div class="form-group">
                        <label class="form-label">Additional Image</label>
                        <div class="image-upload-container single">
                            <div class="upload-box" id="additional-upload">
                                <input type="file" id="add-additional-image" accept="image/*" hidden>
                                <div class="upload-content">
                                    <i class="bx bx-cloud-upload upload-icon"></i>
                                    <p>Upload Image</p>
                                    <span>Click to upload</span>
                                </div>
                                <div class="image-preview" id="additional-preview" style="display: none;">
                                    <img src="" alt="Additional item">
                                    <button type="button" class="remove-image">&times;</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Additional Name</label>
                            <input type="text" id="add-additional-name" class="form-input" placeholder="Enter additional name" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Price (₱)</label>
                            <input type="number" id="add-additional-price" class="form-input" placeholder="1.00" min="1" step="0.01" required>
                        </div>
                    </div>

                    <!-- Inclusions Section -->
                    <div class="form-group">
                        <div class="inclusions-header">
                            <label class="form-label">Inclusions</label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="with-inclusions">
                                <span>With Inclusions</span>
                            </label>
                        </div>
                        <div class="inclusions-container" id="inclusions-container" style="display: none;">
                            <div class="inclusions-list" id="inclusions-list">
                                <div class="inclusion-item">
                                    <input type="text" class="form-input inclusion-input" placeholder="Enter inclusion">
                                    <button type="button" class="remove-inclusion">
                                        <i class="bx bx-x"></i>
                                    </button>
                                </div>
                            </div>
                            <button type="button" class="btn-add-inclusion" id="add-inclusion">
                                <i class="bx bx-plus"></i>
                                Add Inclusion
                            </button>
                        </div>
                    </div>

                    <!-- Additional Code (Auto-generated) -->
                    <div class="form-group">
                        <label class="form-label">Additional Code</label>
                        <input type="text" id="add-additional-code" class="form-input" placeholder="Auto-generated" readonly>
                    </div>

                    <!-- Modal Actions -->
                    <div class="modal-actions">
                        <button type="button" class="btn-secondary" id="cancel-add-additional">Cancel</button>
                        <button type="submit" class="btn-primary" id="confirm-add-additional">Add Additional</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- VIEW MODAL -->
        <div id="viewModal" class="modern-modal">
            <div class="modal-backdrop"></div>
            <div class="modal-content large">
                <div class="modal-header">
                    <h2 class="modal-title" id="view-modal-title">Product Details</h2>
                    <button class="modal-close" id="close-view-modal">&times;</button>
                </div>
                <div class="view-content" id="view-content">
                    <!-- Content will be populated dynamically -->
                </div>
            </div>
        </div>

        <!-- EDIT MODAL -->
        <div id="editModal" class="modern-modal">
            <div class="modal-backdrop"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title" id="edit-modal-title">Edit Item</h2>
                    <button class="modal-close" id="close-edit-modal">&times;</button>
                </div>
                <div class="edit-content" id="edit-content">
                    <!-- Content will be populated dynamically -->
                </div>
            </div>
        </div>

        <!-- CONFIRMATION MODAL -->
        <div id="confirmModal" class="modern-modal">
            <div class="modal-backdrop"></div>
            <div class="modal-content small">
                <div class="modal-header">
                    <h2 class="modal-title">Confirm Action</h2>
                </div>
                <div class="confirm-content">
                    <p id="confirm-message">Are you sure you want to proceed?</p>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn-secondary" id="confirm-cancel">Cancel</button>
                    <button type="button" class="btn-primary" id="confirm-ok">Confirm</button>
                </div>
            </div>
        </div>

        <!-- CROP MODAL -->
        <div id="cropModal" class="modern-modal">
            <div class="modal-backdrop"></div>
            <div class="modal-content large">
                <div class="modal-header">
                    <h2 class="modal-title">Crop Image</h2>
                    <button class="modal-close" id="close-crop-modal">&times;</button>
                </div>
                <div class="crop-content">
                    <div class="crop-container">
                        <img id="crop-image" src="" alt="Image to crop">
                    </div>
                    <div class="crop-info">
                        <p>Adjust the crop area to fit your image. The image will be resized to a portrait format (3:4 aspect ratio).</p>
                    </div>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn-secondary" id="cancel-crop">Cancel</button>
                    <button type="button" class="btn-primary" id="confirm-crop">Apply Crop</button>
                </div>
            </div>
        </div>

        <!-- MOBILE BOTTOM NAVIGATION -->
        <nav class="mobile-bottom-nav">
            <a href="./dashboard.html" class="mobile-nav-item">
                <i class="bx bxs-dashboard icon"></i>
                <span class="text">Dashboard</span>
            </a>
            
            <a href="./analytics.html" class="mobile-nav-item">
                <i class="bx bxs-bar-chart-alt-2 icon"></i>
                <span class="text">Analytics</span>
            </a>
            
            <a href="./inventory.html" class="mobile-nav-item active">
                <i class="bx bxs-t-shirt icon"></i>
                <span class="text">Inventory</span>
            </a>
            
            <a href="./calendar.html" class="mobile-nav-item">
                <i class="bx bxs-calendar icon"></i>
                <span class="text">Calendar</span>
            </a>
            
            <a href="./rental.html" class="mobile-nav-item">
                <i class="bx bxs-package icon"></i>
                <span class="text">Rental</span>
            </a>
              <a href="./customer-logs.html" class="mobile-nav-item">
                <i class="bx bxs-user icon"></i>
                <span class="text">Logs</span>
            </a>
            
            <a href="./settings.html" class="mobile-nav-item">
                <i class="bx bxs-cog icon"></i>
                <span class="text">Settings</span>
            </a>
        </nav>

        <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />

        <!-- NOTYF CDN -->
        <script src="https://cdn.jsdelivr.net/npm/notyf@3/notyf.min.js"></script>

        <!-- CROPPER.JS CDN -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.js"></script>

        <!-- JQUERY JS -->
        <script
            src="https://code.jquery.com/jquery-3.7.1.js"
            integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4="
            crossorigin="anonymous"
        ></script>
        
        <!-- Auth Guard - Must be loaded early -->
        <script type="module" src="./assets/js/auth-guard.js"></script>
        
        <!-- EXTERNAL SCRIPT -->
        <script src="./assets/js/admin-layout.js"></script>
        <script src="./assets/js/admin-layout-mob.js"></script>
        <script src="./assets/js/image-crop-modal.js"></script>
        <script type="module" src="./assets/js/inventory-modern.js"></script>
    </body>
</html>
